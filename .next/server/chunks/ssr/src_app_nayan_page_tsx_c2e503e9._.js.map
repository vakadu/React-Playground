{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/vakadu/Workspace/react-playground/src/app/nayan/page.tsx"],"sourcesContent":["'use client'\n\nimport Image from \"next/image\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { FixedSizeList as List } from \"react-window\";\n\nfunction useWindowSize() {\n\tconst [size, setSize] = useState([window.innerWidth, window.innerHeight]);\n\tuseEffect(() => {\n\t\tconst handleResize = () => setSize([window.innerWidth, window.innerHeight]);\n\t\twindow.addEventListener(\"resize\", handleResize);\n\t\treturn () => window.removeEventListener(\"resize\", handleResize);\n\t}, []);\n\treturn size;\n}\n\nexport default function Nayan() {\n\tconst totalFrames = 20800; // update this\n\tconst fps = 60;\n\n\tconst [frameIndex, setFrameIndex] = useState(1);\n\tconst [isPlaying, setIsPlaying] = useState(true);\n\tconst listRef = useRef<any>(null);\n\tconst [width] = useWindowSize();\n\n\n\tconst padded = String(frameIndex).padStart(4, \"0\");\n\tconst path = '/dump/chellame';\n\tconst src = `${path}/frame_${padded}.jpg`;\n\n\tconst scrollToFrame = (index: any) => {\n\t\tif (listRef.current) {\n\t\t\tlistRef.current.scrollToItem(index - 1, \"center\");\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (!isPlaying) return;\n\t\tconst interval = setInterval(() => {\n\t\t\tsetFrameIndex((prev) => {\n\t\t\t\tconst next = prev >= totalFrames ? 1 : prev + 1;\n\t\t\t\tscrollToFrame(next);\n\t\t\t\treturn next;\n\t\t\t});\n\t\t}, 1000 / fps);\n\t\treturn () => clearInterval(interval);\n\t}, [isPlaying]);\n\n\tuseEffect(() => {\n\t\tconst handleKeyDown = (e: any) => {\n\t\t\tif (e.key === \"ArrowRight\") {\n\t\t\t\tsetIsPlaying(false);\n\t\t\t\tsetFrameIndex((prev) => {\n\t\t\t\t\tconst next = Math.min(prev + 1, totalFrames);\n\t\t\t\t\tscrollToFrame(next);\n\t\t\t\t\treturn next;\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (e.key === \"ArrowLeft\") {\n\t\t\t\tsetIsPlaying(false);\n\t\t\t\tsetFrameIndex((prev) => {\n\t\t\t\t\tconst prevFrame = Math.max(prev - 1, 1);\n\t\t\t\t\tscrollToFrame(prevFrame);\n\t\t\t\t\treturn prevFrame;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener(\"keydown\", handleKeyDown);\n\t\treturn () => window.removeEventListener(\"keydown\", handleKeyDown);\n\t}, [frameIndex]);\n\n\tconst handleSeek = (index: any) => {\n\t\tsetFrameIndex(index);\n\t\tsetIsPlaying(false);\n\t\tscrollToFrame(index);\n\t};\n\n\t// react-window item renderer\n\tconst Thumbnail = ({ index, style }: any) => {\n\t\tconst frameNum = index + 1;\n\t\tconst frameName = String(frameNum).padStart(4, \"0\");\n\t\tconst isActive = frameNum === frameIndex;\n\n\t\treturn (\n\t\t\t<div style={{ ...style, padding: 2 }}>\n\t\t\t\t<Image\n\t\t\t\t\tsrc={`${path}/frame_${frameName}.jpg`}\n\t\t\t\t\talt={`frame_${frameName}`}\n\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t// style={{\n\t\t\t\t\t// \twidth: 80,\n\t\t\t\t\t// \theight: \"100%\",\n\t\t\t\t\t// \tobjectFit: \"cover\",\n\t\t\t\t\t// \tborder: isActive ? \"2px solid lime\" : \"1px solid #333\",\n\t\t\t\t\t// \tcursor: \"pointer\",\n\t\t\t\t\t// }}\n\t\t\t\t\tonClick={() => handleSeek(frameNum)}\n\t\t\t\t\tfill\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div style={{ background: \"black\", height: \"100vh\", display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t{/* Main Frame View */}\n\t\t\t<div style={{ flex: 1, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n\t\t\t\t<Image\n\t\t\t\t\tsrc={src}\n\t\t\t\t\talt={`Frame ${padded}`}\n\t\t\t\t\tstyle={{ maxWidth: \"100%\", maxHeight: \"100%\" }}\n\t\t\t\t\tonError={() => console.warn(\"Missing:\", src)}\n\t\t\t\t\tfill\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{/* Virtualized Thumbnails */}\n\t\t\t<div style={{ background: \"#111\", borderTop: \"2px solid #333\", position: 'absolute', bottom:0  }}>\n\t\t\t\t<List\n\t\t\t\t\tref={listRef}\n\t\t\t\t\theight={70}\n\t\t\t\t\titemCount={totalFrames}\n\t\t\t\t\titemSize={84} // 80px width + padding\n\t\t\t\t\twidth={width}\n\t\t\t\t\tlayout=\"horizontal\"\n\t\t\t\t>\n\t\t\t\t\t{Thumbnail}\n\t\t\t\t</List>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}